<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="星星机">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    <title>星星机</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="phone-wrapper">
        <div class="phone-case">
            <div class="screen">
                <!-- 背景星星层 -->
                <div id="stars-container"></div>
                

                <!-- 流星雨按钮 -->
                <div class="meteor-btn" id="meteor-btn">
                    <i class="far fa-star"></i>
                </div>

                <!-- 内容区域 -->
                <div class="content">
                    <!-- 顶部头像区域 -->
                    <div class="header-section">
                        <div class="avatar-wrapper">
                            <div class="planet-ring"></div>
                            <div class="avatar-container" id="avatar-container">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Galaxy&backgroundColor=transparent" alt="用户头像" class="avatar-img" id="avatar-img">
                                <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                            </div>
                        </div>
                    </div>

                    <!-- 输入框区域 -->
                    <div class="input-section">
                        <input type="text" class="star-input" placeholder="记录此刻的星尘...">
                    </div>

                    <!-- 图标布局区域 -->
                    <div class="icons-layout">
                        <!-- 第一部分 -->
                        <div class="layout-row">
                            <div class="layout-col left flex-center">
                                <div class="icon-circle icon-diary" id="icon-diary">
                                    <i class="fas fa-book-open"></i>
                                </div>
                            </div>
                            <div class="layout-col right flex-column">
                                <div class="icon-rect icon-heart" id="icon-heart">
                                    <i class="fas fa-heart-pulse"></i>
                                </div>
                                <div class="icon-rect icon-file" id="icon-file">
                                    <i class="fas fa-folder-open"></i>
                                </div>
                            </div>
                        </div>

                        <!-- 第二部分 -->
                        <div class="layout-row">
                            <div class="layout-col left flex-column">
                                <div class="icon-rect icon-worldbook" id="icon-worldbook">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div class="icon-rect icon-settings" id="icon-settings">
                                    <i class="fas fa-cog"></i>
                                </div>
                            </div>
                            <div class="layout-col right flex-center">
                                <div class="icon-circle icon-paw" id="icon-paw">
                                    <i class="fas fa-paw"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 主设置菜单 -->
                <div class="settings-page" id="settings-menu">
                    <div class="settings-header">
                        <button class="close-btn" id="close-menu-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>设置</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="settings-content menu-content">
                        <div class="menu-item" id="btn-api-settings">
                            <div class="menu-icon"><i class="fas fa-code"></i></div>
                            <span>API 设置</span>
                            <i class="fas fa-chevron-right arrow"></i>
                        </div>
                        <div class="menu-item" id="btn-theme-settings">
                            <div class="menu-icon"><i class="fas fa-paint-brush"></i></div>
                            <span>美化设置</span>
                            <i class="fas fa-chevron-right arrow"></i>
                        </div>
                        <div class="menu-item" id="btn-data-settings">
                            <div class="menu-icon"><i class="fas fa-database"></i></div>
                            <span>数据</span>
                            <i class="fas fa-chevron-right arrow"></i>
                        </div>
                    </div>
                </div>

                <!-- API 设置页面 -->
                <div class="settings-page sub-page" id="api-settings-page">
                    <div class="settings-header">
                        <button class="close-btn" id="back-to-menu-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>API 设置</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="settings-content">
                        <div class="form-group">
                            <label for="api-url">API URL</label>
                            <input type="text" id="api-url" placeholder="例如: https://api.openai.com/v1">
                        </div>
                        <div class="form-group">
                            <label for="api-key">API Key</label>
                            <input type="password" id="api-key" placeholder="sk-...">
                        </div>
                        <div class="form-group">
                            <label>模型</label>
                            <div class="model-input-group">
                                <div class="custom-select-wrapper">
                                    <div class="custom-select" id="model-select-custom">
                                        <div class="custom-select-trigger">
                                            <span id="selected-model-text">请选择或拉取模型</span>
                                            <i class="fas fa-chevron-down arrow"></i>
                                        </div>
                                        <div class="custom-options">
                                            <!-- 选项将通过 JS 动态生成 -->
                                            <div class="custom-option selected" data-value="">请选择或拉取模型</div>
                                        </div>
                                    </div>
                                    <input type="hidden" id="model-select-value" value="">
                                </div>
                                <button id="fetch-models-btn" class="icon-btn" title="拉取模型列表">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="range-header">
                                <label for="temperature">温度</label>
                                <span id="temp-value">0.7</span>
                            </div>
                            <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7">
                            <div class="range-labels">
                                <span>0 (稳定)</span>
                                <span>2 (创造性)</span>
                            </div>
                        </div>
                        <button id="save-settings-btn" class="save-btn">保存配置</button>
                    </div>
                </div>

                <!-- 美化设置页面 -->
                <div class="settings-page sub-page" id="theme-settings-page">
                    <div class="settings-header">
                        <button class="close-btn" id="back-to-menu-btn-theme">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>美化设置</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="settings-content">
                        <div class="menu-content">
                            <!-- 日间模式 -->
                            <div class="menu-item" style="justify-content: space-between; cursor: default;">
                                <div style="display: flex; align-items: center;">
                                    <span>日间模式</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="day-mode-toggle">
                                    <span class="slider round"></span>
                                </label>
                            </div>

                            <!-- 导航气泡 -->
                            <div class="menu-item" id="btn-wallpaper-settings">
                                <span>壁纸</span>
                                <i class="fas fa-chevron-right arrow"></i>
                            </div>
                            <div class="menu-item" id="btn-icon-settings">
                                <span>图标</span>
                                <i class="fas fa-chevron-right arrow"></i>
                            </div>
                            <div class="menu-item" id="btn-css-settings">
                                <span>CSS</span>
                                <i class="fas fa-chevron-right arrow"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 壁纸设置子页面 -->
                <div class="settings-page sub-sub-page" id="wallpaper-settings-page">
                    <div class="settings-header">
                        <button class="close-btn" id="back-from-wallpaper">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>壁纸设置</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="settings-content">
                        <div class="wallpaper-section">
                            <div class="section-title">主屏幕壁纸</div>
                            <div class="wallpaper-card">
                                <div class="wallpaper-previews-container">
                                    <!-- 夜间模式 -->
                                    <div class="wallpaper-preview-item">
                                        <span class="preview-label">夜间模式</span>
                                        <div class="wallpaper-preview" id="night-wallpaper-preview">
                                            <div class="preview-phone">
                                                <div class="preview-screen" id="wallpaper-preview-screen-night"></div>
                                            </div>
                                            <div class="upload-overlay">
                                                <i class="fas fa-camera"></i>
                                            </div>
                                        </div>
                                        <input type="file" id="wallpaper-upload-night" accept="image/*" style="display: none;">
                                    </div>

                                    <!-- 日间模式 -->
                                    <div class="wallpaper-preview-item">
                                        <span class="preview-label">日间模式</span>
                                        <div class="wallpaper-preview" id="day-wallpaper-preview">
                                            <div class="preview-phone">
                                                <div class="preview-screen" id="wallpaper-preview-screen-day"></div>
                                            </div>
                                            <div class="upload-overlay">
                                                <i class="fas fa-camera"></i>
                                            </div>
                                        </div>
                                        <input type="file" id="wallpaper-upload-day" accept="image/*" style="display: none;">
                                    </div>
                                </div>
                                
                                <button class="action-btn default-btn" id="reset-wallpaper-btn">
                                    <span>恢复默认</span>
                                </button>
                            </div>
                        </div>

                        <div class="wallpaper-section">
                            <div class="section-title">聊天背景</div>
                            <div class="wallpaper-card">
                                <div class="wallpaper-previews-container">
                                    <!-- 夜间模式 -->
                                    <div class="wallpaper-preview-item">
                                        <span class="preview-label">夜间模式</span>
                                        <div class="wallpaper-preview" id="chat-night-wallpaper-preview">
                                            <div class="preview-phone">
                                                <div class="preview-screen" id="chat-wallpaper-preview-screen-night"></div>
                                            </div>
                                            <div class="upload-overlay">
                                                <i class="fas fa-camera"></i>
                                            </div>
                                        </div>
                                        <input type="file" id="chat-wallpaper-upload-night" accept="image/*" style="display: none;">
                                    </div>

                                    <!-- 日间模式 -->
                                    <div class="wallpaper-preview-item">
                                        <span class="preview-label">日间模式</span>
                                        <div class="wallpaper-preview" id="chat-day-wallpaper-preview">
                                            <div class="preview-phone">
                                                <div class="preview-screen" id="chat-wallpaper-preview-screen-day"></div>
                                            </div>
                                            <div class="upload-overlay">
                                                <i class="fas fa-camera"></i>
                                            </div>
                                        </div>
                                        <input type="file" id="chat-wallpaper-upload-day" accept="image/*" style="display: none;">
                                    </div>
                                </div>
                                
                                <button class="action-btn default-btn" id="reset-chat-wallpaper-btn">
                                    <span>恢复默认</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 图标设置子页面 -->
                <div class="settings-page sub-sub-page" id="icon-settings-page">
                    <div class="settings-header">
                        <button class="close-btn" id="back-from-icon">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>图标设置</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="settings-content">
                        <div class="form-group">
                            <label>图标样式</label>
                            <div class="style-options">
                                <button class="style-btn active" data-type="icon-style" data-value="glass">毛玻璃</button>
                                <button class="style-btn" data-type="icon-style" data-value="flat">扁平</button>
                                <button class="style-btn" data-type="icon-style" data-value="outline">线框</button>
                            </div>
                        </div>
                        
                        <div class="custom-icons-section">
                            <div class="section-header">
                                <div class="section-title">自定义</div>
                                <button class="refresh-btn" id="reset-custom-icons-btn" title="恢复默认">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                            <div class="custom-icons-bubble">
                                <div class="custom-icon-item" data-target="icon-diary">
                                    <div class="icon-preview"><i class="fas fa-book-open"></i></div>
                                    <span>星图</span>
                                </div>
                                <div class="custom-icon-item" data-target="icon-heart">
                                    <div class="icon-preview"><i class="fas fa-heart-pulse"></i></div>
                                    <span>星语</span>
                                </div>
                                <div class="custom-icon-item" data-target="icon-file">
                                    <div class="icon-preview"><i class="fas fa-folder-open"></i></div>
                                    <span>档案</span>
                                </div>
                                <div class="custom-icon-item" data-target="icon-worldbook">
                                    <div class="icon-preview"><i class="fas fa-book"></i></div>
                                    <span>世界书</span>
                                </div>
                                <div class="custom-icon-item" data-target="icon-settings">
                                    <div class="icon-preview"><i class="fas fa-cog"></i></div>
                                    <span>设置</span>
                                </div>
                                <div class="custom-icon-item" data-target="icon-paw">
                                    <div class="icon-preview"><i class="fas fa-paw"></i></div>
                                    <span>桌宠</span>
                                </div>
                            </div>
                            <input type="file" id="icon-upload" accept="image/*" style="display: none;">
                        </div>
                    </div>
                </div>

                <!-- CSS设置子页面 -->
                <div class="settings-page sub-sub-page" id="css-settings-page">
                    <div class="settings-header">
                        <button class="close-btn" id="back-from-css">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>CSS 设置</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="settings-content">
                        <div class="form-group">
                            <label>自定义 CSS</label>
                            <textarea class="css-input" placeholder="在此输入 CSS 代码..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- 桌宠设置页面 -->
                <div class="settings-page sub-page" id="pet-settings-page">
                    <div class="settings-header">
                        <button class="close-btn" id="back-from-pet">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>桌宠</h2>
                        <button class="close-btn" id="pet-options-btn">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                    <div class="settings-content pet-content">
                        <!-- 上传区域 -->
                        <div class="pet-upload-container" id="pet-upload-trigger">
                            <div class="pet-preview" id="pet-preview">
                                <i class="fas fa-plus"></i>
                            </div>
                            <input type="file" id="pet-file-input" accept="image/*" style="display: none;">
                        </div>
                        
                        <!-- 名字输入 (修改为横线样式) -->
                        <div class="pet-name-container">
                            <input type="text" id="pet-name-input" class="pet-name-input" placeholder="给它起个名字吧">
                            <div class="pet-name-line"></div>
                        </div>

                        <!-- 语录输入 -->
                        <div class="form-group" style="width: 100%; margin-top: 20px;">
                            <label>桌宠语录 (每行一句)</label>
                            <textarea id="pet-quotes-input" class="css-input" placeholder="输入语录，点击桌宠时随机弹出..." style="height: 150px;"></textarea>
                        </div>
                        
                        <button id="save-pet-btn" class="save-btn">保存设置</button>
                    </div>
                </div>

                <!-- 桌宠选项侧边栏 -->
                <div class="settings-page sub-sub-page" id="pet-options-sidebar">
                    <div class="settings-header">
                        <button class="close-btn" id="close-pet-options">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>桌宠开关</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="settings-content">
                        <div class="menu-item" style="justify-content: space-between; cursor: default;">
                            <span>开启桌宠</span>
                            <label class="switch">
                                <input type="checkbox" id="pet-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 档案页面 -->
                <div class="settings-page" id="archive-page">
                    <div class="settings-header">
                        <button class="close-btn" id="close-archive-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="close-btn" id="cancel-manage-btn" style="display: none; width: auto; font-size: 16px;">
                            取消
                        </button>
                        <h2>档案</h2>
                        <button class="header-action-btn" id="save-archive-btn">
                            保存
                        </button>
                        <button class="header-action-btn" id="manage-emoji-btn" style="display: none;">
                            管理
                        </button>
                    </div>
                    <div class="settings-content" id="archive-content-container">
                        <div id="archive-persona-content">
                            <!-- AI Persona -->
                            <div class="persona-section">
                                <div class="section-title">角色人设（AI Persona）</div>
                                <div class="persona-bubble">
                                    <div class="persona-header">
                                        <div class="persona-avatar-container" id="ai-avatar-trigger">
                                            <img src="https://api.dicebear.com/7.x/bottts/svg?seed=AI" alt="AI Avatar" id="ai-avatar-img">
                                            <input type="file" id="ai-avatar-upload" accept="image/*" style="display: none;">
                                        </div>
                                        <div class="persona-info">
                                            <input type="text" class="persona-name-input" id="ai-name-input" placeholder="角色姓名">
                                            <div class="persona-name-line"></div>
                                        </div>
                                    </div>
                                    <textarea class="persona-bg-input" id="ai-bg-input" placeholder="在此输入角色人设背景..."></textarea>
                                </div>
                            </div>

                            <!-- My Persona -->
                            <div class="persona-section">
                                <div class="section-title">我的人设（My Persona）</div>
                                <div class="persona-bubble">
                                    <div class="persona-header">
                                        <div class="persona-avatar-container" id="user-persona-avatar-trigger">
                                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=User" alt="User Avatar" id="user-persona-avatar-img">
                                            <input type="file" id="user-persona-avatar-upload" accept="image/*" style="display: none;">
                                        </div>
                                        <div class="persona-info">
                                            <input type="text" class="persona-name-input" id="user-name-input" placeholder="我的姓名">
                                            <div class="persona-name-line"></div>
                                        </div>
                                    </div>
                                    <textarea class="persona-bg-input" id="user-bg-input" placeholder="在此输入我的人设背景..."></textarea>
                                </div>
                            </div>
                        </div>

                        <div id="archive-emoji-content" style="display: none;">
                            <!-- AI Emoji -->
                            <div class="persona-section">
                                <div class="section-title">角色表情包</div>
                                <div class="emoji-grid" id="ai-emoji-grid">
                                    <div class="emoji-add-btn" id="add-ai-emoji-btn">
                                        <i class="fas fa-plus"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- User Emoji -->
                            <div class="persona-section">
                                <div class="section-title">我的表情包</div>
                                <div class="emoji-grid" id="user-emoji-grid">
                                    <div class="emoji-add-btn" id="add-user-emoji-btn">
                                        <i class="fas fa-plus"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 表情包上传模态框 -->
                        <div class="modal-overlay" id="emoji-upload-modal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3>添加表情包</h3>
                                    <button class="close-modal-btn" id="close-emoji-modal">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="upload-options">
                                        <button class="upload-option-btn" id="upload-local-btn">
                                            <i class="fas fa-image"></i>
                                            <span>本地上传</span>
                                        </button>
                                        <button class="upload-option-btn" id="upload-url-btn">
                                            <i class="fas fa-link"></i>
                                            <span>URL 上传</span>
                                        </button>
                                    </div>
                                    
                                    <!-- URL 输入区域 -->
                                    <div class="url-input-container" id="url-input-container" style="display: none; flex-direction: column;">
                                        <textarea id="emoji-url-input" placeholder="输入格式：表情包名字:URL链接&#10;例如：&#10;开心:https://example.com/happy.png&#10;难过:https://example.com/sad.png"></textarea>
                                        <button id="confirm-url-btn" style="width: 100%; margin-top: 10px; padding: 10px;">确认</button>
                                    </div>

                                    <input type="file" id="emoji-file-input" accept="image/*" multiple style="display: none;">
                                </div>
                            </div>
                        </div>

                        <!-- 名字修改模态框 -->
                        <div class="modal-overlay" id="name-edit-modal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3>修改名字</h3>
                                    <button class="close-modal-btn" id="close-name-modal">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="url-input-container" style="margin-top: 0;">
                                        <input type="text" id="emoji-name-input" placeholder="输入新名字...">
                                        <button id="confirm-name-btn">确认</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 底部切换气泡 -->
                    <div class="archive-bottom-bar">
                        <div class="toggle-bubble">
                            <div class="toggle-item active" id="tab-persona" title="人设">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="toggle-divider"></div>
                            <div class="toggle-item" id="tab-emoji" title="表情包">
                                <i class="far fa-smile"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 世界书页面 -->
                <div class="settings-page" id="worldbook-page">
                    <div class="settings-header">
                        <button class="close-btn" id="close-worldbook-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>世界书</h2>
                        <div class="header-actions">
                            <button class="header-icon-btn" id="add-folder-btn" title="新建文件夹">
                                <i class="fas fa-folder-plus"></i>
                            </button>
                            <button class="header-icon-btn" id="add-worldbook-btn" title="新增世界书">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="settings-content">
                        <div class="empty-state" id="worldbook-empty-state">
                            <i class="fas fa-book"></i>
                            <p>这里将记录你的世界设定...</p>
                        </div>
                        
                        <div class="folder-list" id="folder-list"></div>

                        <!-- 新建文件夹模态框 -->
                        <div class="modal-overlay" id="new-folder-modal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3>新建文件夹</h3>
                                    <button class="close-modal-btn" id="close-folder-modal">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="url-input-container" style="margin-top: 0;">
                                        <input type="text" id="folder-name-input" placeholder="输入文件夹名称...">
                                        <button id="confirm-folder-btn">创建</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 新增世界书页面 -->
                <div class="settings-page sub-page" id="add-worldbook-page">
                    <div class="settings-header">
                        <button class="close-btn" id="close-add-worldbook-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>新增世界书</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="settings-content">
                        <div class="form-group">
                            <label>名称</label>
                            <input type="text" id="worldbook-title-input" placeholder="输入名称...">
                        </div>
                        <div class="form-group">
                            <label>选择文件夹</label>
                            <div class="custom-select-wrapper">
                                <div class="custom-select" id="folder-select">
                                    <div class="custom-select-trigger">
                                        <span id="selected-folder-text">无</span>
                                        <i class="fas fa-chevron-down arrow"></i>
                                    </div>
                                    <div class="custom-options" id="folder-options">
                                        <div class="custom-option selected" data-value="">无</div>
                                        <!-- 动态生成 -->
                                    </div>
                                </div>
                                <input type="hidden" id="selected-folder-value" value="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>内容</label>
                            <textarea class="css-input" id="worldbook-content-input" placeholder="输入内容..." style="height: 300px;"></textarea>
                        </div>
                        <button id="save-worldbook-item-btn" class="save-btn">保存</button>
                    </div>
                </div>

                <!-- 聊天页面 -->
                <div class="settings-page" id="chat-page">
                    <div class="settings-header">
                        <button class="close-btn" id="close-chat-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2>星语</h2>
                        <div style="width: 32px;"></div>
                    </div>
                    <div class="chat-container">
                        <div class="chat-messages" id="chat-messages">
                            <div class="message-time">刚刚</div>
                            <div class="message ai-message">
                                <div class="message-avatar">
                                    <img src="https://api.dicebear.com/7.x/bottts/svg?seed=AI" alt="AI">
                                </div>
                                <div class="message-content">
                                    你好呀，我是星语。在这里记录你的想法吧...
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <!-- 扩展功能菜单 -->
                            <div class="chat-action-menu" id="chat-action-menu">
                                <div class="action-item" id="action-redo" title="重回">
                                    <i class="fas fa-redo"></i>
                                </div>
                                <div class="action-item" id="action-emoji" title="表情包">
                                    <i class="far fa-smile"></i>
                                </div>
                                <div class="action-item" id="action-voice" title="语音">
                                    <i class="fas fa-microphone"></i>
                                </div>
                                <div class="action-item" id="action-image" title="图片">
                                    <i class="far fa-image"></i>
                                </div>
                                <div class="action-item" id="action-camera" title="拍摄">
                                    <i class="fas fa-camera"></i>
                                </div>
                                <div class="action-item" id="action-summary" title="总结">
                                    <i class="fas fa-magic"></i>
                                </div>
                            </div>

                            <button id="chat-plus-btn" class="icon-btn secondary-btn" style="background: transparent;">
                                <i class="fas fa-plus"></i>
                            </button>
                            <input type="text" id="chat-input" placeholder="发送消息...">
                            <button id="chat-star-btn" class="icon-btn secondary-btn" style="background: transparent;">
                                <i class="far fa-star"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 桌宠元素 -->
                <div id="desktop-pet" class="desktop-pet" style="display: none;">
                    <img id="pet-image-display" src="" alt="Pet">
                    <div class="pet-bubble" id="pet-bubble">你好呀！</div>
                </div>

                <!-- 通用确认模态框 -->
                <div class="modal-overlay" id="universal-confirm-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="confirm-modal-title">确认</h3>
                            <button class="close-modal-btn" id="close-confirm-modal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p id="confirm-modal-message" style="color: var(--text-color); margin-bottom: 20px; font-size: 14px; text-align: center;"></p>
                            <div style="display: flex; gap: 10px;">
                                <button id="confirm-modal-cancel-btn" class="upload-option-btn" style="padding: 10px; flex: 1;">取消</button>
                                <button id="confirm-modal-ok-btn" style="padding: 10px; flex: 1; background: #ff3b30; color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;">删除</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 通用输入模态框 -->
                <div class="modal-overlay" id="universal-prompt-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="prompt-modal-title">输入</h3>
                            <button class="close-modal-btn" id="close-prompt-modal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="url-input-container" style="margin-top: 0; flex-direction: column; gap: 15px;">
                                <input type="text" id="prompt-modal-input" placeholder="请输入...">
                                <div style="display: flex; gap: 10px; width: 100%;">
                                    <button id="prompt-modal-cancel-btn" class="upload-option-btn" style="padding: 10px; flex: 1;">取消</button>
                                    <button id="prompt-modal-ok-btn" style="padding: 10px; flex: 1; background: var(--accent-color); color: #000; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;">确认</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 提示消息容器 -->
                <div id="toast-container" class="toast-container"></div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
